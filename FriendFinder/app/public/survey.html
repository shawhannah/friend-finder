<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Friend Finder</title>

    <link rel="stylesheet" href="style.css" />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css"
      integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS"
      crossorigin="anonymous"
    />

    <script
      src="https://code.jquery.com/jquery-3.3.1.min.js"
      integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
      crossorigin="anonymous"
    ></script>
    <div class="jumbotron jumbotron-fluid">
      <div class="container">
        <h1 class="display-4">Which Belcher Are You?</h1>
        <p class="lead">
          Find out where you fit in with your favorite burger family. Pick the
          statements that best match your reactions.
        </p>
      </div>
    </div>
  </head>

  <body>
    <div class="modal fade" tabindex="-1" role="dialog" id="results-modal">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Best Match:</h5>
            <button
              type="button"
              class="close"
              data-dismiss="modal"
              aria-label="Close"
            >
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <p id="match-name"></p>
            <img id="match-photo" />
          </div>
          <div class="modal-footer">
            <button
              id="modal-button"
              type="button"
              class="btn btn-secondary"
              data-dismiss="modal"
            >
              Close
            </button>
          </div>
        </div>
      </div>
    </div>
    <br />
    <div id="questions">
      <div id="q1">
        <form class="qform">
          <p class="question">#1</p>
          <p>
            Burgers are an art and I am an artist.
          </p>
          <div>
            <input type="radio" id="q1-bob" name="q1" value="1" />
            <label for="q1-1">Absolutely</label>

            <input type="radio" id="q1-linda" name="q1" value="2" />
            <label for="q1-2">Let's just have a good time!</label>

            <input type="radio" id="q1-tina" name="q1" value="3" />
            <label for="q1-3">Jimmy Jr likes burgers.</label>

            <input type="radio" id="q1-gene" name="q1" value="4" />
            <label for="q1-4">Speaking of burgers, where's my costume?</label>

            <input type="radio" id="q1-louise" name="q1" value="5" />
            <label for="q1-5">By art you mean fart, right?</label>
          </div>
        </form>
      </div>
      <br />
      <div id="q2">
        <form class="qform">
          <p class="question">#2</p>
          <p>There's never a bad time to start singing.</p>
          <div>
            <input type="radio" id="q2-bob" name="q2" value="1" />
            <label for="q2-1">Yes. Yes, there is.</label>

            <input type="radio" id="q2-linda" name="q2" value="2" />
            <label for="q2-2">I agreeee (singing voice).</label>

            <input type="radio" id="q2-tina" name="q2" value="3" />
            <label for="q2-3">Uh, I should sing for Jimmy Jr.</label>

            <input type="radio" id="q2-gene" name="q2" value="4" />
            <label for="q2-4">I can burp and sing at the same time.</label>

            <input type="radio" id="q2-louise" name="q2" value="5" />
            <label for="q2-5">Oh, god, Mom. Just end me now.</label>
          </div>
        </form>
      </div>
      <br />
      <div id="q3">
        <form class="qform">
          <p class="question">#3</p>
          <p>
            Boys and horses are the most important things in my exhilarating
            life.
          </p>
          <div>
            <input type="radio" id="q3-bob" name="q3" value="1" />
            <label for="q3-1">What? No, that's weird.</label>

            <input type="radio" id="q3-linda" name="q3" value="2" />
            <label for="q3-2"
              >If it's important to my sweet babies, it's important to
              me.</label
            >

            <input type="radio" id="q3-tina" name="q3" value="3" />
            <label for="q3-3">God, yes.</label>

            <input type="radio" id="q3-gene" name="q3" value="4" />
            <label for="q3-4">Horses smell weird.</label>

            <input type="radio" id="q3-louise" name="q3" value="5" />
            <label for="q3-5">I'm not Tina. I'm normal.</label>
          </div>
        </form>
      </div>
      <br />
      <div id="q4">
        <form class="qform">
          <p class="question">#4</p>
          <p>
            Don't you ever, ever touch my hat or I will kill you in your sleep.
          </p>
          <div>
            <input type="radio" id="q4-bob" name="q4" value="1" />
            <label for="q4-1">Okay, that doesn't sound good.</label>

            <input type="radio" id="q4-linda" name="q4" value="2" />
            <label for="q4-2">What! Did Louise say that??</label>

            <input type="radio" id="q4-tina" name="q4" value="3" />
            <label for="q4-3">Yeah, I wouldn't do that if I were you.</label>

            <input type="radio" id="q4-gene" name="q4" value="4" />
            <label for="q4-4">Oh! I want to see a murder!</label>

            <input type="radio" id="q4-louise" name="q4" value="5" />
            <label for="q4-5">Hell yeah. Don't even think about it.</label>
          </div>
        </form>
      </div>
      <br />
      <div id="q5">
        <form class="qform">
          <p class="question">#5</p>
          <p>
            Can someone tell me what a butthole looks like? I keep trying but I
            can't see mine.
          </p>
          <div>
            <input type="radio" id="q5-bob" name="q5" value="1" />
            <label for="q5-1"
              >No, no. We're not starting this discussion today.</label
            >

            <input type="radio" id="q5-linda" name="q5" value="2" />
            <label for="q5-2">Don't say butthole at the dinner table!</label>

            <input type="radio" id="q5-tina" name="q5" value="3" />
            <label for="q5-3">I bet Jimmy Jr has a beautiful butthole.</label>

            <input type="radio" id="q5-gene" name="q5" value="4" />
            <label for="q5-4">Yeah, it's so hard to get the right angle.</label>

            <input type="radio" id="q5-louise" name="q5" value="5" />
            <label for="q5-5">Go look in a mirror.</label>
          </div>
        </form>
      </div>
      <br />
      <div>
        <button id="submit" type="submit">All Done</button>
      </div>
    </div>

    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
      integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.2/js/bootstrap.min.js"
      integrity="sha384-o+RDsa0aLu++PJvFqy8fFScvbHFLtbvScb8AjopnFD+iEQ7wo/CG0xlczd+2O/em"
      crossorigin="anonymous"
    ></script>

    <script type="text/javascript">
      var newUser;

      $("#submit").on("click", function(e) {
        e.preventDefault();

        var userName = $("#name")
          .val()
          .trim();
        var userImage = $("#photo")
          .val()
          .trim();
        var userScores = [];

        $.each($("input[name='q1']:checked"), function() {
          var answerValue = $(this).val();
          userScores.push(answerValue);
        });
        $.each($("input[name='q2']:checked"), function() {
          var answerValue = $(this).val();
          userScores.push(answerValue);
        });
        $.each($("input[name='q3']:checked"), function() {
          var answerValue = $(this).val();
          userScores.push(answerValue);
        });
        $.each($("input[name='q4']:checked"), function() {
          var answerValue = $(this).val();
          userScores.push(answerValue);
        });
        $.each($("input[name='q5']:checked"), function() {
          var answerValue = $(this).val();
          userScores.push(answerValue);
        });

        newUser = {
          name: userName,
          photo: userImage,
          scores: userScores
        };
        var txt = $("input").val();

        $.post("/api/new", newUser, function(result) {
          $("#match-name").text(result.name);
          $("#match-photo").attr("src", result.photo);
          $("#results-modal").modal("toggle");
        });
      });
    </script>
  </body>
</html>
